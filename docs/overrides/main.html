{% extends "base.html" %}

{% block extrahead %}
  {{ super() }}
  <script>
    // 这是一个高效的拦截器，它会在页面加载时根据 HTML 语言属性自动改字
    document.addEventListener("DOMContentLoaded", function() {
      var __translateToc = function() {
        var lang = document.documentElement.lang || "en";
        var dict = {
          "en": "On this page",
          "es": "En esta página",
          "fr": "Sur cette page",
          "de": "Auf dieser Seite",
          "ja": "このページの内容"
        };
        
        var titleEl = document.querySelector(".md-nav--secondary .md-nav__title");
        if (titleEl) {
          // 仅替换文本内容，不影响内部的 icon span
          for (var i = 0; i < titleEl.childNodes.length; i++) {
            var node = titleEl.childNodes[i];
            if (node.nodeType === 3 && node.textContent.trim().length > 1) {
              node.textContent = dict[lang] || dict["en"];
            }
          }
        }
      };

      __translateToc();
      // 兼容 Material 主题的即时加载模式
      if (typeof subscribe === "function") {
        subscribe(__translateToc);
      }
    });
  </script>
{% endblock %}
