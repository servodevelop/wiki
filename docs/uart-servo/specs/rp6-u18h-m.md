# PiPER-Mate
![Programming Language](https://img.shields.io/badge/language-Python-blue?style=flat-square) ![Framework](https://img.shields.io/badge/framework-ROS2%20Humble-orange?style=flat-square) ![Hardware](https://img.shields.io/badge/hardware-PiPER%20Mate%20%2B%20Piper-green?style=flat-square) ![OS](https://img.shields.io/badge/OS-Ubuntu%2022.04-purple?style=flat-square) ![License](https://img.shields.io/badge/license-MIT-yellow?style=flat-square)

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

PiPER-Mate æ˜¯ä¸€ä¸ªæœºæ¢°è‡‚é¥æ“ä½œæ§åˆ¶é¡¹ç›®ï¼Œæ”¯æŒé€šè¿‡ **PiPER Mate æœºæ¢°è‡‚** å®æ—¶è¿œç¨‹æ§åˆ¶ **Piper æœºæ¢°è‡‚**ã€‚é¡¹ç›®æä¾›ä¸‰ç§æ§åˆ¶æ–¹å¼ï¼Œé€‚ç”¨äºæœºå™¨äººç ”ç©¶ã€é¥æ“ä½œæ•™å­¦ã€AIè®­ç»ƒæ•°æ®é‡‡é›†ç­‰å¤šç§åœºæ™¯ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ¤– **å¤šæ§åˆ¶æ–¹å¼**ï¼šæ”¯æŒ ROS2 HUMBLEã€Lerobot æ¡†æ¶ã€Python SDK ä¸‰ç§æ§åˆ¶æ¨¡å¼
- âš¡ **é«˜æ§åˆ¶é¢‘ç‡**ï¼šæ”¯æŒæœ€é«˜ 100Hz çš„å®æ—¶é¥æ“ä½œ
- ğŸ”„ **å…³èŠ‚è‡ªåŠ¨æ˜ å°„**ï¼šè‡ªåŠ¨å°† PiPER Mate å…³èŠ‚è§’åº¦è½¬æ¢ä¸º Piper æ§åˆ¶æŒ‡ä»¤
- ğŸ›¡ï¸ **å®‰å…¨ä¿æŠ¤**ï¼šå†…ç½®å…³èŠ‚è§’åº¦é™åˆ¶ã€åŠ›çŸ©æ§åˆ¶å’Œå¼‚å¸¸æ£€æµ‹æœºåˆ¶
- ğŸ¯ **å¤¹çˆªæ§åˆ¶**ï¼šæ”¯æŒå¯é€‰çš„å¤¹çˆªååŒæ§åˆ¶åŠŸèƒ½

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

| é¡¹ç›® | è¦æ±‚ |
|------|------|
| æ“ä½œç³»ç»Ÿ | Ubuntu 22.04 |
| ROSç‰ˆæœ¬ | ROS2 Humble |
| ç¡¬ä»¶è®¾å¤‡ | PiPER Mateæœºæ¢°è‡‚ + Piper æœºæ¢°è‡‚ |
| é©±åŠ¨ç¨‹åº | [CH340 USBé©±åŠ¨](https://www.wch.cn/downloads/CH341SER_EXE.html) |

### å®‰è£…æ­¥éª¤

#### æ–¹å¼ä¸€ï¼šPython SDKï¼ˆæ¨èæ–°æ‰‹ï¼‰

```bash
# 1. å®‰è£…ä¾èµ–
sudo apt update && sudo apt install can-utils ethtool
sudo pip install serial fashionstar-uart-sdk piper-sdk python-can scipy

# 2. é…ç½®CANæ¥å£
cd piper-mate
bash find_all_can_port.sh
bash can_activate.sh can0 1000000

# 3. è¿è¡Œç¨‹åº
sudo chmod 777 /dev/ttyUSB*
python3 ./Python_SDK/piper_pipermate.py
```

#### æ–¹å¼äºŒï¼šROS2 HUMBLE

```bash
# 1. å®‰è£…ROS2ä¾èµ–
cd ROS2_HUMBLE
colcon build
source install/setup.bash

# 2. å¯åŠ¨èŠ‚ç‚¹ï¼ˆéœ€è¦ä¸¤ä¸ªç»ˆç«¯ï¼‰
# ç»ˆç«¯1ï¼šå¯åŠ¨PiPER Mateé©±åŠ¨
ros2 run piper_mate driver --ros-args -p port:=/dev/ttyUSB0 -p auto_enable:=false

# ç»ˆç«¯2ï¼šå¯åŠ¨Piperæ§åˆ¶
bash can_activate.sh can0 1000000
ros2 run piper piper_single_ctrl --ros-args -p can_port:=can0 -p auto_enable:=true
```

#### æ–¹å¼ä¸‰ï¼šLerobot æ¡†æ¶

```bash
# å‚è€ƒLerobot/README.mdé…ç½®è¯´æ˜
```

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```bash
PiPER-Mate/
â”œâ”€â”€ Python_SDK/                  # Python SDKæ§åˆ¶æ–¹å¼
â”‚   â”œâ”€â”€ piper_pipermate.py       # ä¸»æ§åˆ¶ç¨‹åº
â”‚   â””â”€â”€ README.md                # è¯¦ç»†ä½¿ç”¨æ–‡æ¡£
â”œâ”€â”€ ROS2_HUMBLE/                 # ROS2æ§åˆ¶æ–¹å¼
â”‚   â”œâ”€â”€ src/piper/               # Piperé©±åŠ¨èŠ‚ç‚¹
â”‚   â”œâ”€â”€ src/piper_mate/          # Piper_mateé©±åŠ¨èŠ‚ç‚¹
â”‚   â”œâ”€â”€ src/piper_msgs/          # Piperæ¶ˆæ¯å®šä¹‰
â”‚   â””â”€â”€ README.md                # ROS2ä½¿ç”¨æ–‡æ¡£
â”œâ”€â”€ Lerobot/                     # Lerobotæ¡†æ¶æ§åˆ¶æ–¹å¼
â”‚   â”œâ”€â”€ lerobot_robot_piper/     # Piperæœºå™¨äººé…ç½®
â”‚   â”œâ”€â”€ lerobot_teleoperator_pipermate/  # é¥æ“ä½œå™¨
â”‚   â””â”€â”€ piper-star_en.md         # Lerobotä½¿ç”¨æ–‡æ¡£ï¼ˆè‹±æ–‡ï¼‰
â”‚   â””â”€â”€ piper-star.md            # Lerobotä½¿ç”¨æ–‡æ¡£
â”‚   â””â”€â”€ README.md                # ä½¿ç”¨æ­¥éª¤
â”œâ”€â”€ can_activate.sh              # CANæ¥å£æ¿€æ´»ï¼ˆæ ¹ç›®å½•ï¼‰
â”œâ”€â”€ can_config.sh                # CANæ¥å£é…ç½®
â””â”€â”€ README.md                    # æœ¬æ–‡æ¡£
```

---

## ğŸ¯ æ§åˆ¶æ–¹å¼å¯¹æ¯”

| ç‰¹æ€§ | Python SDK | ROS2 HUMBLE | Lerobot |
|------|------------|-------------|---------|
| éš¾åº¦ | â­ ç®€å• | â­â­â­ ä¸­ç­‰ | â­â­â­â­â­ å¤æ‚ |
| å®æ—¶æ€§ | â­â­â­â­â­ | â­â­â­ | â­â­â­ |
| æ‰©å±•æ€§ | â­â­ | â­â­â­â­â­ | â­â­â­â­ |
| é€‚ç”¨åœºæ™¯ | å¿«é€Ÿæµ‹è¯•ã€æ•™å­¦ | æœºå™¨äººç³»ç»Ÿé›†æˆ | AIè®­ç»ƒã€ç ”ç©¶ |

---

## ğŸ”§ ç¡¬ä»¶è¿æ¥

### è¿æ¥æ‹“æ‰‘

```bash
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         USB          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                 â”‚
â”‚   PiPER Mate    â”‚                      â”‚      è®¡ç®—æœº      â”‚
â”‚     æœºæ¢°è‡‚       â”‚                      â”‚ (Ubuntu 22.04)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                  â”‚
                                                 USB
                                                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         CAN          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                 â”‚
â”‚      Piper      â”‚                      â”‚  CANè½¬USBé€‚é…å™¨  â”‚
â”‚      æœºæ¢°è‡‚      â”‚                      â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š å…³èŠ‚æ˜ å°„

ç³»ç»Ÿè‡ªåŠ¨å°† PiPER Mate çš„ 6 ä¸ªå…³èŠ‚æ˜ å°„åˆ° Piper æœºæ¢°è‡‚ï¼š

| å…³èŠ‚ | PiPER Mate è§’åº¦ | Piper å¼§åº¦ | æ–¹å‘ |
|------|------------------|------------|------|
| Joint1 | -150Â° ~ 150Â° | -2.62 ~ 2.62 rad | åå‘ |
| Joint2 | 0Â° ~ 180Â° | 0 ~ 3.14 rad | æ­£å‘ |
| Joint3 | -170Â° ~ 0Â° | -2.97 ~ 0 rad | æ­£å‘ |
| Joint4 | -100Â° ~ 100Â° | -1.75 ~ 1.75 rad | åå‘ |
| Joint5 | -70Â° ~ 70Â° | -1.22 ~ 1.22 rad | æ­£å‘ |
| Joint6 | -120Â° ~ 120Â° | -2.09 ~ 2.09 rad | åå‘ |

---

## âš ï¸ å®‰å…¨æ³¨æ„äº‹é¡¹

1. **æ“ä½œå‰æ£€æŸ¥**ï¼šç¡®ä¿æœºæ¢°è‡‚å‘¨å›´æ— éšœç¢ç‰©ï¼Œå·¥ä½œç©ºé—´å®‰å…¨
2. **æ€¥åœæ§åˆ¶**ï¼šç¨‹åºè¿è¡Œæ—¶æŒ‰ `Ctrl+C` å¯ç«‹å³åœæ­¢
3. **å…³èŠ‚é™åˆ¶**ï¼šç³»ç»Ÿå·²è‡ªåŠ¨è®¾ç½®å®‰å…¨è§’åº¦é™åˆ¶ï¼Œé¿å…è¶Šç•Œè¿åŠ¨
4. **ç”µæºç®¡ç†**ï¼šç¡®ä¿æœºæ¢°è‡‚ä¾›ç”µç¨³å®šï¼Œé¿å…ç”µå‹æ³¢åŠ¨

---

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q1: æ‰¾ä¸åˆ° `/dev/ttyUSB0` è®¾å¤‡ï¼Ÿ**

```bash
# æ£€æŸ¥USBè®¾å¤‡
ls -l /dev/ttyUSB*

# æ£€æŸ¥CH340é©±åŠ¨
lsusb | grep CH340

# å¦‚æœæ²¡æœ‰å®‰è£…é©±åŠ¨ï¼Œè¯·ä»å®˜ç½‘ä¸‹è½½å®‰è£…
```

**Q2: CAN æ¥å£æ— æ³•æ¿€æ´»ï¼Ÿ**

```bash
# æŸ¥æ‰¾CANç«¯å£
bash find_all_can_port.sh

# æ‰‹åŠ¨æ¿€æ´»CANæ¥å£
sudo ip link set can0 type can bitrate 1000000
sudo ip link set up can0

# æ£€æŸ¥CANæ¥å£çŠ¶æ€
ip link show can0
```

**Q3: æœºæ¢°è‡‚è¿æ¥å¤±è´¥ï¼Ÿ**

- æ£€æŸ¥USBçº¿è¿æ¥æ˜¯å¦æ¾åŠ¨
- ç¡®è®¤æœºæ¢°è‡‚ç”µæºå·²å¼€å¯
- æ£€æŸ¥é©±åŠ¨æ¿å¼€å…³ä½ç½®ï¼ˆåº”æ‹¨å‘ç”µæºæ¥å£ä¸€ä¾§ï¼‰
- å°è¯•æ›´æ¢USBç«¯å£

**Q4: USBè¿æ¥æ–­å¼€æ—¶ç¨‹åºä¸ç»ˆæ­¢ï¼Ÿ**

ç¨‹åºå·²æ·»åŠ å¼‚å¸¸å¤„ç†ï¼Œå½“PiPER Mate USBæ–­å¼€æ—¶ä¼šè‡ªåŠ¨ç»ˆæ­¢å¹¶æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼š

```bash
âŒ è‡´å‘½é”™è¯¯ï¼šPiPER Mate USBè¿æ¥æ–­å¼€ï¼
```

---

## ğŸ“– è¯¦ç»†æ–‡æ¡£

é€‰æ‹©ä½ éœ€è¦çš„æ§åˆ¶æ–¹å¼æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ï¼š

- ğŸ“˜ **[Python SDK è¯¦ç»†æ–‡æ¡£](./Python_SDK/README.md)** - æ¨èï¼æœ€ç®€å•æ˜“ç”¨
- ğŸ“— **[ROS2 HUMBLE è¯¦ç»†æ–‡æ¡£](./ROS2_HUMBLE/README.md)** - é€‚ç”¨äºæœºå™¨äººç³»ç»Ÿé›†æˆ
- ğŸ“™ **[Lerobot è¯¦ç»†æ–‡æ¡£](./Lerobot/README.md)** - é€‚ç”¨äºAIè®­ç»ƒå’Œç ”ç©¶

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº [MIT License](LICENSE) å¼€æºã€‚

---

## ğŸ‘¥ ä½œè€…ä¸è‡´è°¢

- **é¡¹ç›®ç»´æŠ¤è€…**ï¼š[Welt-liu](https://github.com/Welt-liu)
- **æ„Ÿè°¢**ï¼šPiPER Mate å’Œ Piper å›¢é˜Ÿçš„ç¡¬ä»¶æ”¯æŒ

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [PiPER Mate å®˜æ–¹ä»“åº“](https://github.com/servodevelop/piper-mate/tree/main)
- [Piper ROS2 å®˜æ–¹ä»“åº“](https://github.com/agilexrobotics/piper_ros/tree/humble/)
- [Lerobot æ¡†æ¶](https://github.com/huggingface/lerobot)

---